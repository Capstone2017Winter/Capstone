<html>
	<head>
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
		<meta content="utf-8" http-equiv="encoding">
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" ></script>
		<script type="text/javascript">
			$( document ).ready(function(){
				window.WebSocket = window.WebSocket || window.MozWebSocket;
				var socket = new WebSocket('ws://192.168.1.1:3000', 'dumb-increment-protocol');
				socket.onopen = function(){
					alert("Socket connection established");
				}
				socket.binaryType = "blob";
				var xhr = new XMLHttpRequest()
				xhr.open("GET", "http://www.ece.rice.edu/~wakin/images/lena512.bmp");
				xhr.responseType = "blob";
				xhr.send();
				console.log("Image request sent");
				xhr.addEventListener("load", function() {
    				var reader = new FileReader();
    				reader.readAsDataURL(xhr.response); 
    				reader.addEventListener("loadend", function() {             
        			//console.log(reader.result);
        			socket.send(reader.result);
        			console.log("Sent data to server");

    			});
});

				
			});
		</script>
	</head>
	<body >

		<img id = "image" src="http://www.ece.rice.edu/~wakin/images/lena512.bmp"> 

	</body>
</html>